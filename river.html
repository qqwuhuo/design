<!DOCTYPE html>
<html lang="zh">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>黄河长卷</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="./public/favicon.ico">
  <style>
    body { margin:0; }
    .river-page { 
      position:relative; 
      min-height:100vh; 
      background:url(./images/river.png) center/cover no-repeat;
    }
    .back-btn { 
      position:absolute; 
      top:10px; 
      left:20px; 
      display:flex; 
      align-items:center; 
      gap:8px; 
      padding:12px 20px; 
      background:rgba(255,255,255,0.9); 
      border:2px solid #e53935; 
      border-radius:8px; 
      color:#e53935; 
      font-size:14px; 
      font-weight:600; 
      cursor:pointer; 
      transition:all 0.3s; 
      backdrop-filter:blur(10px); 
      box-shadow:0 4px 12px rgba(0,0,0,0.3); 
      z-index:100; 
    }
    .back-btn:hover { 
      background:rgba(255,255,255,1); 
      transform:translateY(-2px); 
      box-shadow:0 6px 16px rgba(229,57,53,0.3); 
      border-color:#c62828; 
      color:#c62828; 
    }
    .back-icon { font-size:16px; font-weight:bold; }

    .overlay-svg { 
      position:absolute; 
      inset:0; 
      width:100%; 
      height:100%; 
    }
    .events .dot { 
      fill:#e53935; 
      stroke:#fff; 
      stroke-width:0.3; 
      filter:drop-shadow(0 0 2px rgba(229,57,53,0.6)); 
      cursor:pointer; 
      pointer-events:all; 
      transition: all 0.2s;
    }
    .events .dot:hover { 
      r: 1.8; 
      filter: drop-shadow(0 0 4px rgba(229,57,53,0.8));
    }
    .card { 
      position:absolute; 
      transform:translateY(-50%); 
      width:min(42ch,46vw); 
      background:rgba(255,255,255,0.95); 
      border:1px solid rgba(0,0,0,0.06); 
      border-radius:8px; 
      box-shadow:0 10px 20px rgba(0,0,0,0.08); 
      padding:12px 14px; 
      opacity:0; 
      pointer-events:none; 
      transition:opacity 0.2s; 
      z-index: 99; 
    }
    .card.show { 
      opacity:1; 
      pointer-events:auto; 
    }
    .card-year { 
      font-size:12px; 
      color:#8c6d45; 
      margin-bottom:6px; 
    }
    .card-title { 
      font-weight:600; 
      color:#533; 
      margin-bottom:6px; 
    }
    .card-desc { 
      color:#444; 
      line-height:1.55; 
    }
    @media (max-width:768px) { 
      .card { 
        width:86vw; 
        left:7vw !important; 
      }

      .events .dot { 
        r: 2.5; 
      }
      .events .dot:hover { 
        r: 3; 
      }
    }
  </style>
</head>
<body>
  <div class="river-page">
    <a class="back-btn" href="index.html"><span class="back-icon">←</span><span>返回首页</span></a>
  
    <svg class="overlay-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
      <g class="events">
        <!-- 调整圆点位置：左上角圆点下移，右上角圆点重新分布 -->
        <circle class="dot" cx="65" cy="25" r="1.3" onclick="toggleCard('jiahu', event)" />
        <circle class="dot" cx="20" cy="50" r="1.3" onclick="toggleCard('erlitou', event)" />
        <circle class="dot" cx="25" cy="15" r="1.3" onclick="toggleCard('yugong', event)" />
        <circle class="dot" cx="75" cy="40" r="1.3" onclick="toggleCard('longmen', event)" />
        <circle class="dot" cx="25" cy="75" r="1.3" onclick="toggleCard('huayuankou', event)" />
        <circle class="dot" cx="83" cy="70" r="1.3" onclick="toggleCard('modern', event)" />
      </g>
    </svg>
    <div id="cards-container">
      <!-- 卡片内容由 JS 控制显示 -->
    </div>
  </div>
  <script>
    const events = {
      jiahu: { year:'约公元前7000年', title:'贾湖骨笛（河南舞阳）', desc:'舞阳贾湖遗址出土的骨笛，是中华文明最早的乐器之一，见证黄河流域早期音乐文化萌芽，被誉为"中华第一笛"。', x:70, y:25 },
      erlitou: { year:'约公元前1750年', title:'二里头文化（河南偃师）', desc:'偃师二里头遗址是夏文化的重要代表，发现大型宫殿建筑群和青铜器，标志着黄河流域早期国家形态的形成。', x:20, y:50 },
      yugong: { year:'传说时代', title:'大禹治水（河南相关遗迹）', desc:'大禹治水的传说在河南多地有遗迹，如登封大禹庙、禹州大禹山等，体现了黄河流域治水文化的深厚底蕴。', x:15, y:25 },
      longmen: { year:'北魏-唐宋', title:'龙门石窟（河南洛阳）', desc:'洛阳龙门石窟依伊河而建，是黄河流域佛教艺术的瑰宝，体现了中原文化与外来文明的融合，影响后世艺术发展。', x:75, y:40 },
      huayuankou: { year:'1938年', title:'花园口决堤（河南郑州）', desc:'抗战时期花园口黄河决堤事件，虽为军事需要，但造成巨大灾难，深刻影响黄河流域生态格局，警示治水重要性。', x:25, y:75 },
      modern: { year:'新中国以来', title:'小浪底工程（河南济源）', desc:'小浪底水利枢纽是黄河治理的重要工程，集防洪、减淤、供水、发电于一体，标志着现代黄河治理的新阶段。', x:80, y:70 }
    };
    let activeId = null;
    function toggleCard(id, evt) {
      if (activeId === id) {
        hideCard(id);
        activeId = null;
        return;
      }
      Object.keys(events).forEach(hideCard);
      activeId = id;
      const e = events[id];
      let card = document.getElementById('card-'+id);
      if (!card) {
        card = document.createElement('div');
        card.className = 'card show';
        card.id = 'card-'+id;
        
        let cardLeft = e.x;
        let cardTop = e.y;
        
        // 如果卡片在左上角区域，向右下偏移
        if (e.x < 30 && e.y < 30) {
          cardLeft = e.x + 5;
          cardTop = e.y + 5;
        }
        // 如果卡片在右上角区域，向左下偏移
        else if (e.x > 70 && e.y < 40) {
          cardLeft = e.x - 5;
          cardTop = e.y + 5;
        }
        
        card.style.left = `calc(${cardLeft}% + 8px)`;
        card.style.top = `calc(${cardTop}% - 8px)`;
        card.innerHTML = `<div class='card-year'>${e.year}</div><div class='card-title'>${e.title}</div><div class='card-desc'>${e.desc}</div>`;
        document.getElementById('cards-container').appendChild(card);
      } else {
        card.classList.add('show');
      }
      
      if (evt) evt.stopPropagation();
    }
    function hideCard(id) {
      const card = document.getElementById('card-'+id);
      if (card) card.classList.remove('show');
    }
    document.addEventListener('click', function(e) {
      if (!e.target.classList.contains('dot') && !e.target.classList.contains('card') && !e.target.closest('.card')) {
        Object.keys(events).forEach(hideCard);
        activeId = null;
      }
    });
  </script>
</body>
</html>